#!/usr/bin/env python3

import socket

HOST = 'localhost'#'35.209.78.73'  # The server's hostname or IP address
PORT = 65432        # The port used by the server
TEST_DATA = [b'1,01:10:00,DP,11.9,C,G\r\n08/03/2021,01:05:00,DP,12.0,C,G\r\n08/03/2021,01:00:00,DP,12.1,C,G\r\n08/03/2021,01:55:00,WC,27.1,C,G\r\n08/03/2021,01:50:00,WC,27.1,C,G\r\n08/03/2021,01:45:00,WC,27.3,C,G\r\n08/03/2021,01:40:00,WC,27.3,C,G\r\n08/03/2021,01:35:00,WC,27.3,C,G\r\n08/03/2021,01:30:00,WC,27.5,C,G\r\n08/03/2021,01:25:00,WC,27.7,C,G\r\n08/03/2021,01:20:00,WC,27.9,C,G\r\n08/03/2021,01:15:00,WC,28.0,C,G\r\n08/03/2021,01:10:00,WC,28.1,C,G\r\n08/03/2021,01:05:00,WC,28.2,C,G\r\n08/03/2021,01:00:00,WC,28.3,C,G\r\n08/03/2021,01:55:00,BP,837.0,hPa,G\r\n08/03/2021,01:50:00,BP,837.0,hPa,G\r\n08/03/2021,01:45:00,BP,837.0,hPa,G\r\n08/03/2021,01:40:00,BP,836.9,hPa,G\r\n08/03/2021,01:35:00,BP,836.9,hPa,G\r\n08/03/2021,01:30:00,BP,836.8,hPa,G\r\n08/03/2021,01:25:00,BP,836.9,hPa,G\r\n08/03/2021,01:20:00,BP,836.9,hPa,G\r\n08/03/2021,01:15:00,BP,836.8,hPa,G\r\n08/03/2021,01:10:00,BP,836.8,hPa,G\r\n08/03/2021,01:05:00,BP,836.7,hPa,G\r\n08/03/2021,01:00:00,BP,836.8,hPa,G\r\n08/03/2021,01:55:50,WSI,0.4,m/s,G\r\n08/03/2021,01:55:40,WDI,224.4,Deg,G\r\n08/03/2021,01:55:00,WSA,0.00,,G\r\n0', b'8/03/2021,01:50:00,WSA,0.00,,G\r\n08/03/2021,01:45:00,WSA,0.00,,G\r\n08/03/2021,', b'01:40:00,WSA,0.00,,G\r\n08/03/2021,01:35:00,WSA,0.00,,G\r\n08/03/2021,01:30:00,WSA,0.00,,G\r\n08/03/2021,01:25:00,WSA,0.00,,G\r\n08/03/2021,01:20:00,WSA,0.00,,G\r\n08/03/2021,01:15:00,WSA,0.00,,G\r\n08/03/2021,01:10:00,WSA,0.00,,G\r\n08/03/2021,01:05:00,WSA,0.00,,G\r\n08/03/2021,01:00:00,WSA,0.00,,G\r\n08/03/2021,01:55:00,WDA,270.0,Deg,G\r\n08/03/2021,01:50:00,WDA,270.0,Deg,G\r\n08/03/2021,01:45:00,WDA,270.0,Deg,G\r\n08/03/2021,01:40:00,WDA,270.0,Deg,G\r\n08/03/2021,01:35:00,WDA,270.0,Deg,G\r\n08/03/2021,01:30:00,WDA,270.0,Deg,G\r\n08/03/2021,01:25:00,WDA,270.0,Deg,G\r\n08/03/2021,01:20:00,WDA,270.0,Deg,G\r\n08/03/2021,01:15:00,WDA,270.0,Deg,G\r\n08/03/2021,01:10:00,WDA,270.0,Deg,G\r\n08/03/2021,01:05:00,WDA,270.0,Deg,G\r\n08/03/2021,01:00:00,WDA,270.0,Deg,G\r\n08/03/2021,01:55:00,WSG,0.0,m/s,G\r\n08/03/2021,01:50:00,WSG,0.0,m/s,G\r\n08/03/2021,01:45:00,WSG,0.0,m/s,G\r\n08/03/2021,01:40:00,WSG,0.0,m/s,G\r\n08/03/2021,01:35:00,WSG,0.0,m/s,G\r\n08/03/2021,01:30:00,WSG,0.0,m/s,G\r\n08/03/2021,01:25:00,WSG,0.0,m/s,G\r\n08/03/2021,01:20:00,WSG,0.0,m/s,G\r\n08/03/2021,01:', b'15:00,WSG,0.0,m/s,G\r\n08/03/2021,01:10:00,WSG,0.0,m/s,G\r\n08/03/2021,01:05:00,', b'WSG,0.0,m/s,G\r\n08/03/2021,01:00:00,WSG,0.0,m/s,G\r\n08/03/2021,01:55:00,PABS,49.60,mm,G\r\n08/03/2021,01:50:00,PABS,49.60,mm,G\r\n08/03/2021,01:45:00,PABS,49.60,mm,G\r\n08/03/2021,01:40:00,PABS,49.60,mm,G\r\n08/03/2021,01:35:00,PABS,49.60,mm,G\r\n08/03/2021,01:30:00,PABS,49.60,mm,G\r\n08/03/2021,01:25:00,PABS,49.60,mm,G\r\n08/03/2021,01:20:00,PABS,49.60,mm,G\r\n08/03/2021,01:15:00,PABS,49.60,mm,G\r\n08/03/2021,01:10:00,PABS,49.60,mm,G\r\n08/03/2021,01:05:00,PABS,49.60,mm,G\r\n08/03/2021,01:00:00,PABS,49.60,mm,G\r\n08/03/2021,01:55:00,PD,0.00,mm,G\r\n08/03/2021,01:50:00,PD,0.00,mm,G\r\n08/03/2021,01:45:00,PD,0.00,mm,G\r\n08/03/2021,01:40:00,PD,0.00,mm,G\r\n08/03/2021,01:35:00,PD,0.00,mm,G\r\n08/03/2021,01:30:00,PD,0.00,mm,G\r\n08/03/2021,01:25:00,PD,0.00,mm,G\r\n08/03/2021,01:20:00,PD,0.00,mm,G\r\n08/03/2021,01:15:00,PD,0.00,mm,G\r\n08/03/2021,01:10:00,PD,0.00,mm,G\r\n08/03/2021,01:05:00,PD,0.00,mm,G\r\n08/03/2021,01:00:00,PD,0.00,mm,G\r\n08/03/2021,01:55:00,PT,0,,G\r\n08/03/2021,01:50:00,PT,0,,G\r\n08/03/2021,01:45:00,PT,0,,G\r\n08/03/2021,01:40:00,PT,0,,G\r\n08/03/', b'2021,01:35:00,PT,0,,G\r\n08/03/2021,01:30:00,PT,0,,G\r\n08/03/2021,01:25:00,PT,0', b',,G\r\n08/03/2021,01:20:00,PT,0,,G\r\n08/03/2021,01:15:00,PT,0,,G\r\n08/03/2021,01:10:00,PT,0,,G\r\n08/03/2021,01:05:00,PT,0,,G\r\n08/03/2021,01:00:00,PT,0,,G\r\n08/03/2021,01:55:00,PI,0.00,,G\r\n08/03/2021,01:50:00,PI,0.00,,G\r\n08/03/2021,01:45:00,PI,0.00,,G\r\n08/03/2021,01:40:00,PI,0.00,,G\r\n08/03/2021,01:35:00,PI,0.00,,G\r\n08/03/2021,01:30:00,PI,0.00,,G\r\n08/03/2021,01:25:00,PI,0.00,,G\r\n08/03/2021,01:20:00,PI,0.00,,G\r\n08/03/2021,01:15:00,PI,0.00,,G\r\n08/03/2021,01:10:00,PI,0.00,,G\r\n08/03/2021,01:05:00,PI,0.00,,G\r\n08/03/2021,01:00:00,PI,0.00,,G\r\n08/03/2021,01:55:00,COMP,142,,G\r\n08/03/2021,01:50:00,COMP,143,,G\r\n08/03/2021,01:45:00,COMP,142,,G\r\n08/03/2021,01:40:00,COMP,143,,G\r\n08/03/2021,01:35:00,COMP,143,,G\r\n08/03/2021,01:30:00,COMP,143,,G\r\n08/03/2021,01:25:00,COMP,143,,G\r\n08/03/2021,01:20:00,COMP,143,,G\r\n08/03/2021,01:15:00,COMP,143,,G\r\n08/03/2021,01:10:00,COMP,143,,G\r\n08/03/2021,01:05:00,COMP,143,,G\r\n08/03/2021,01:00:00,COMP,143,,G\r\n08/03/2021,01:55:00,GRAD,17.1,wm2,G\r\n08/03/2021,01:50:00,GRAD,19.3,wm2,G\r\n08/03/2021,01:45:00,', b'GRAD,19.1,wm2,G\r\n08/03/2021,01:40:00,GRAD,19.8,wm2,G\r\n08/03/2021,01:35:00,GR', b'\r\n\r\n>\n\n\r\n>08/03/2021,01:55:00,AT,25.1,C,G\r\n', b'\r\n', b'\r\n', b'\r\n', b'\r\n', b'\r\n', b'\r\n']

with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
    print("Trying to connect...")
    s.connect((HOST, PORT))
    #s.sendall(b'HELLO WORLD')
    for i, td in enumerate(TEST_DATA):
        print(f"SENDING....{i+1} of {len(TEST_DATA)}")
        s.sendall(td)
        data = s.recv(1024)
        print("DATA: ", repr(data))
print("Received", repr(data))
